{% extends 'inicio.html' %}


{% block general %}

    <center>
    {% if not modnoticia %}
        <h2>Crear Noticia</h2>
    {% else %}
        <h2>Modificar noticia</h2>
    {% endif %}
    </center>

    <div align="left">
    <h5>Titulo:</5> <br>
    <input type="text" name="titulo_noticia"  size="90" value="{{oldTitulo}}">
    </div>

    <div align="left">
    <h5>Cuerpo:</5> <br>
    <textarea name="" id="" cols="100" rows="10" maxlength="10000">{{oldCuerpoNoticia}}</textarea>
    </div>


    <div align="left">
    <h5>Categoria:</5> <br>
    <select name="categoria", id="categoria" onchange="selectCategoria()">
        {% if oldCategoria %}
            <optgroup label="Actual">
            <option value="{{oldCategoria.id}}" selected>{{oldCategoria.nombre}}</option>
            </optgroup>
        {% else %}
            <option value="" selected>Seleccionar</option>
        {% endif %}
        <optgroup label="Otras categorias">
        {% for categoria in categoriasExistentes %}
            {% if categoria != oldCategoria %}
                <option value="{{categoria.id}}">{{categoria.nombre}}</option>
            {% endif %}
        {% endfor %}
        </optgroup>

        <optgroup label="Crear">
        <option value="+">Crear nueva categoria</option>
        </optgroup>
    </select>

    <input type="hidden" name="nueva_categoria" id="nueva_categoria" size="30" maxlenght=30 value=""
            placeholder="Nueva categoria aqui...">
    
    </div>

    <script>
        // usado para cuando el usuario elige crear nueva categoria
        function selectCategoria(){
          var valCategoria = document.getElementById("categoria").value;
          var inputCategoria = document.getElementById("nueva_categoria");
          if (valCategoria == "+"){
            inputCategoria.type="text";
            }
          else{
            inputCategoria.type="hidden";
            inputCategoria.value="";
            }
        }
    </script>

{% endblock %}